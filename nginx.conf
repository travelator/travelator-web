# Define events block
events {
    worker_connections 1024;  # Define maximum number of simultaneous connections per worker
}

http {
    server {
        listen 80;
        server_name _;  # Handle requests for any domain (you can change this later if you get a domain)

        # Root directory for the static files (the React build files)
        root /usr/share/nginx/html;  # The path where the React app is copied to

        # Serve the static files (index.html, JS, CSS, images, etc.)
        location / {
            try_files $uri /index.html;  # Ensure React Router works by always serving index.html
        }

        # Optional: Handle caching for static assets (e.g., JS, CSS, images) for better performance
        location ~* \.(?:css|js|json|ttf|woff|woff2|eot|otf|svg|png|jpg|jpeg|gif|ico|webp|mp4|webm)$ {
            expires 30d;  # Cache static assets for 30 days
            add_header Cache-Control "public";
        }

        # Optional: Configure gzip compression for better performance
        gzip on;
        gzip_types text/plain application/xml text/css application/javascript application/json;
        gzip_min_length 1000;
        gzip_proxied any;

        # Error handling (you can customize these pages as needed)
        error_page 404 /404.html;
        error_page 500 502 503 504 /50x.html;
        location = /50x.html {
            root /usr/share/nginx/html;
        }
    }
}
